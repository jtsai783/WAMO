// Generated by CoffeeScript 1.9.3
angular.module('WAMO').controller('moveListController', [
  '$scope', '$http', '$stateParams', 'followupService', function($scope, $http, $stateParams, followupService) {
    $http({
      method: 'GET',
      url: "/api/moves/" + $stateParams.char
    }).success(function(data) {
      var minStartupMove;
      data = _.filter(data, function(move) {
        return move.startup > 0;
      });
      followupService.allMoves = data;
      minStartupMove = _.min(data, function(move) {
        return move.startup;
      });
      followupService.linkableMoves = _.filter(followupService.allMoves, function(move) {
        return move.adv_hit >= minStartupMove.startup;
      });
      return $scope.moves = followupService.linkableMoves;
    });
    return $scope.linkOptions = function(adv) {
      return followupService.calcOptions(adv);
    };
  }
]);
